<!doctype html>
<html>

<head>
    <link rel="stylesheet" href="https://unpkg.com/vue-twentytwenty/dist/vue-twentytwenty.css" />
</head>

<body>
    <h1>Compare images from file paths</h1>
    ... from paths as generated by
    <br>
    find $PWD -type f | sort
    <div id="app">
        <div class="container">
            <div class="item">

                <h2>
                    Original images:
                </h2>
                <textarea v-model="source_path_original" type="text"
                    placeholder="Paths of source images. Paste the content of a bash `find $PWD` inside your directory with original images here."
                    rows="10" style="width: 90%"></textarea>
            </div>
            <div class="item">
                <h2>
                    Padded images:
                </h2>
                <textarea v-model="source_path_padded" type="text"
                    placeholder="Paths of source images. Paste the content of a bash `find $PWD` inside your directory with padded images here."
                    rows="10" style="width: 90%"></textarea>
            </div>
        </div>
        Every entry on the left will be compared to the entry with the same index on the right.
        <br>


        <div v-if="!this.images.length">
            <strong>Please fill both of the above text areas.</strong>
        </div>
        <div v-else>
            <div v-if="this.original_paths.length !== this.padded_paths.length">
                <strong>
                    You provided {{this.original_paths.length}} original image(s) and just {{this.padded_paths.length}}
                    padded image(s).
                    <br>
                    Only displaying comparisons for the first {{this.images.length}} image(s).
                </strong>
            </div>
            <h2>
                Images:
            </h2>
            <div v-for="img in this.images">
                <h3>{{ img.title }} â†’ {{ img.next_title }}</h1>
                    <TwentyTwenty :before="img.path" :after="img.next_path" />
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-twentytwenty/dist/vue-twentytwenty.js"></script>
    <script>
        function getBaseName(s) {
            return !s ? undefined : s.split(/\//).pop();
        }
        new Vue({
            el: '#app',
            data: function () {
                return {
                    source_path_original: '',
                    source_path_padded: '',
                }
            },
            computed: {
                original_paths() {
                    return this.source_path_original.split(/\s/).filter(s => !!s.trim());
                },
                padded_paths() {
                    return this.source_path_padded.split(/\s/).filter(s => !!s.trim());
                },
                images() {

                    let op = [...this.original_paths];
                    let pp = [...this.padded_paths];

                    // zip(op, pp)
                    if (op.length < pp.length) {
                        pp.splice(op.length, pp.length - op.length);
                    } else if (op.length > pp.length) {
                        op.splice(pp.length, op.length - pp.length)
                    }

                    return op.map((x, i) => [x, pp[i]])
                        .map(([o, p]) => {
                            return {
                                path: o,
                                next_path: p,

                                title: getBaseName(o),
                                next_title: getBaseName(p)
                            }
                        });
                }
            }
        });
    </script>
    <style>
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-evenly;
        }

        .item {
            flex-grow: 0.5;
            flex-basis: auto;
        }
    </style>
</body>

</html>
